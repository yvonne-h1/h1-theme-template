{% if settings.klaviyo_bis_api_key != blank %}
  {% # theme-check-disable %}
  <script src="https://a.klaviyo.com/media/js/onsite/onsite.js"></script>
  {% # theme-check-enable %}
  <script>
    var klaviyo = klaviyo || [];

    klaviyo.init({
      account: "{{ settings.klaviyo_bis_api_key }}",
      {%- if settings.klaviyo_bis_listid != blank %}
      list: "{{ settings.klaviyo_bis_listid }}",
      {%- endif %}
      platform: "shopify"
    });

    klaviyo.enable("backinstock",{
      trigger: {
        product_page_text: "{{ 'general.klaviyo.product_page_text' | t }}",
        product_page_class: "button button--lg button--secondary w-full",
        product_page_text_align: "text-center",
        product_page_margin: "0px",
        replace_anchor: false
      },
      modal: {
        headline: "{product_name}",
        body_content: "{{ 'general.klaviyo.body_content' | t }}",
        email_field_label: "{{ 'general.klaviyo.email_field_label' | t }}",
        button_label: "{{ 'general.klaviyo.button_label' | t }}",
        subscribe_checked: {{ settings.klaviyo_bis_subscribe_checked }},
        newsletter_subscribe_label: "{{ 'general.klaviyo.newsletter_subscribe_label' | t }}",
        subscription_success_label: "{{ 'general.klaviyo.subscription_success_label' | t }}",
        footer_content: '',
        additional_styles: "",
        drop_background_color: "#000",
        background_color: "#fff",
        text_color: "var(--text-color-default);",
        button_text_color: "{{ settings.klaviyo_bis_button_text_color }}",
        button_background_color: "{{ settings.klaviyo_bis_background_color }}",
        close_button_color: "#ccc",
        error_background_color: "#fcd6d7",
        error_text_color: "#C72E2F",
        success_background_color: "#d3efcd",
        success_text_color: "#1B9500"
      }
    });
  </script>
{% endif %}
